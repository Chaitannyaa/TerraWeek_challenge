# TerraWeek Day 3

## Task 1: 
Create a Terraform configuration file to define a resource of AWS EC2 instance, Azure storage account, Google Compute Engine, etc. (any one)

**AWS EC2 instance--->**
```sh
main.tf
```
![image](https://github.com/Chaitannyaa/TerraWeek_challenge/assets/117350787/0b03ea96-ca37-4592-ad6f-0d3cc698d1a7)

![image](https://github.com/Chaitannyaa/TerraWeek_challenge/assets/117350787/7b6e0043-a633-4a5b-a86b-1e2075056d01)

```sh
terraform init
```
![image](https://github.com/Chaitannyaa/TerraWeek_challenge/assets/117350787/e366cfba-85f3-404e-b016-757ff62bc2fa)

### Similarly for Microsoft Azure and Google cloud providers

**Azure storage account--->**
```sh
main.tf
```
![image](https://github.com/Chaitannyaa/TerraWeek_challenge/assets/117350787/d97212d2-5cde-4e7d-b5c7-9ffd260cbc6d)

**Google Compute Engine--->**
```sh
main.tf
```
![image](https://github.com/Chaitannyaa/TerraWeek_challenge/assets/117350787/a079f1eb-0f4d-4cc3-801d-3ee97bcbf5a1)

## Task 2: 
Check state files before running plan and apply commands & Use validate command to validate your tf file for errors and provide the Output generated by each commands.

**AWS EC2 instance--->**

![image](https://github.com/Chaitannyaa/TerraWeek_challenge/assets/117350787/e43ddf16-d1b1-472e-b219-f7433abefab7)

```sh
terraform plan
```
![image](https://github.com/Chaitannyaa/TerraWeek_challenge/assets/117350787/3af3f8e7-653c-4634-bc93-ddc82d474cd8)

![image](https://github.com/Chaitannyaa/TerraWeek_challenge/assets/117350787/d7063197-8dae-4e80-a1ab-32f31d3f2473)

```sh
terraform validate
```
![image](https://github.com/Chaitannyaa/TerraWeek_challenge/assets/117350787/fadb857b-aed3-410a-9003-2a0ef5b99672)

## Task 3: 
Add a provisioner to the configuration file to configure the resource after it is created and use Terraform commands to apply for changes and destroy to remove resources.

### What is provisioner in terraform--->

In Terraform, a provisioner is a configuration block that defines how to perform actions on the resource after it has been created, updated or deleted. Provisioners can be used to install packages, run scripts or perform any other kind of post-creation or post-update configuration.

Provisioners are especially useful when you need to perform actions that are not included in the providerâ€™s functionality, such as customizing the software installed in your instances or applying a custom configuration.

There are different types of provisioners supported by Terraform, including:

- local-exec: runs a command on the machine running Terraform
- remote-exec: runs a command on the remote machine through SSH
- chef: applies a Chef role or cookbook to a node
- ansible: applies an Ansible playbook to a node

Provisioners are defined within the resource block and can be triggered on create, update, or delete operations. The local-exec and remote-exec provisioners are available with all providers, while the chef and ansible provisioners are specific to the corresponding providers.

### Let's use provisioner--->

![image](https://github.com/Chaitannyaa/TerraWeek_challenge/assets/117350787/6101d15c-3bc7-4e3d-b30c-0c44aa864ca2)

![image](https://github.com/Chaitannyaa/TerraWeek_challenge/assets/117350787/7cb8f375-cb14-49ea-a77c-56d658ef9a99)

![image](https://github.com/Chaitannyaa/TerraWeek_challenge/assets/117350787/b6d718f5-bece-42ec-bd62-751347953d8f)

![image](https://github.com/Chaitannyaa/TerraWeek_challenge/assets/117350787/f0b85474-8089-4266-9d7b-ab7199fcc246)

```sh
terraform init
```
![image](https://github.com/Chaitannyaa/TerraWeek_challenge/assets/117350787/06d06afa-5fd1-492d-a820-5a291a52556b)

```sh
terraform apply
```
![image](https://github.com/Chaitannyaa/TerraWeek_challenge/assets/117350787/0110dada-d12b-4d72-bbbe-b72a99db81fe)

![image](https://github.com/Chaitannyaa/TerraWeek_challenge/assets/117350787/fa2c5cc9-615d-4ae5-be0d-0e5e791bc8ac)

![image](https://github.com/Chaitannyaa/TerraWeek_challenge/assets/117350787/7b94339d-d5ee-4331-8694-9bc286efa66a)

![image](https://github.com/Chaitannyaa/TerraWeek_challenge/assets/117350787/7177fafa-15b2-45f4-a828-124c081b2737)

## Task 4: 
Add lifecycle management configurations to the configuration file to control the creation, modification, and deletion of the resource and use Terraform commands to apply the changes.

Terraform lifecycle management configurations are used to control the creation, modification, and deletion of resources in your infrastructure. Lifecycle management configurations help you manage the behavior of your infrastructure over time, by specifying how Terraform should handle updates and destructions for certain resources.

Here are some of the common scenarios where lifecycle configurations might be useful:

When you want to replace an instance with a new one, but you want to avoid downtime. In this case, you can create the new instance before destroying the old one, by setting create_before_destroy flag to true.
When you want to disable resource deletion, to avoid accidental deletion of important resources. In this case, you can set prevent_destroy flag to true.
When you want to update a resource only under certain conditions. In this case, you can set prevent_resource_replacement to true and specify the conditions for the update.

Here's an example of the lifecycle configuration block syntax:

```sh
resource "my_resource" "example" {

  # resource configuration

  lifecycle {
    create_before_destroy = true|false
    prevent_destroy       = true|false
    ignore_changes        = [ attribute_name, ... ]
    prevent_replacement   = true|false
  }
}
```
Here's what each parameter does:

- **create_before_destroy**: This parameter is used to control whether the resource is created before destroying the old one. If set to true, Terraform will create the new resource before destroying the old one. This can help prevent downtime during updates.

- **prevent_destroy**: This parameter is used to control whether the resource can be destroyed. If set to true, Terraform will not be able to destroy the resource, even if you try to force it. This can help prevent accidental deletion of important resources.

- **ignore_changes**: This parameter is used to specify attributes that should be ignored when Terraform calculates if the resource should be updated or not. This can help prevent certain attributes from being updated under certain conditions.

- **prevent_replacement**: This parameter is used to control whether the resource should be replaced when it's updated. If set to true, Terraform will try to update the resource in-place, without replacing it.

### Let's use it in our configuration--->

![image](https://github.com/Chaitannyaa/TerraWeek_challenge/assets/117350787/21ebb30a-3cda-40b2-89ca-fb0b7fc8bf04)

**I will change my web server from Nginx to Apache2**

![image](https://github.com/Chaitannyaa/TerraWeek_challenge/assets/117350787/1b33d0d7-c224-4785-b179-1c239a4b9797)

![image](https://github.com/Chaitannyaa/TerraWeek_challenge/assets/117350787/d02a9110-7f1d-4aa0-9316-dab03024e3fe)

```sh
terraform apply
```
![image](https://github.com/Chaitannyaa/TerraWeek_challenge/assets/117350787/6c5082f8-af1c-45e8-89b3-3ea9f1d6ef1c)


![image](https://github.com/Chaitannyaa/TerraWeek_challenge/assets/117350787/f8b9c84c-85c7-429d-9f95-e8590ae63f5f)

# Happy LearningðŸŽ‰ðŸš€
